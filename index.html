<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width,initial-scale=1.0">
      <title>Registration Form</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
      <link rel="stylesheet" href="css/styles.css">
   </head>
   <body>
      <div class="container">
         <div class="box">
            <div class="d-flex justify-content-end mb-3">
               <button type="button" class="btn btn-primary btn-sm" onclick="goToAdminPage()">Admin</button>
            </div>
            <div class="form">
               <!--<h2>Login Form</h2> -->
               <form action="" method="POST" id="registrationform">
                  <h1>Teach For India Volunteer Signup Form</h1>
                  <div class="intro-message">
                     <p>Thank you for considering volunteering with Teach for India. The pandemic has widened the grade to age gap of our learners, especially from the communities Teach for India works, and has undone years of classroom efforts. By volunteering with us, we appreciate your support and initiative to contribute to bridging this gap and bring back education equity in the classroom.</p>
                     <p>Based on your responses, we will allocate you to a classroom that best suits your expertise and support. We really hope this will be a good experience for you.</p>
                  </div>
                  
                  <!-- Section 1 -->
                  <fieldset>
                    <!-- <legend><span class="section">1</span>Your Basic Info</legend> -->
                     <label class="" for="name">Name:</label>
                     <input type="text" name="name" value="" id="name" required />
                     <label class="" for="dob">Date of Birth:</label>
                     <input type="date" name="dob" value="" id="dob" required />
                     <label>Gender:</label>
                     <select id="gender" required>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="transgender">Transgender</option>
                     </select>
                     <label class="" for="email">Email:</label>
                     <input type="email" name="email" value="" id="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" title="Please enter a valid email address" required />
                     <label class="" for="phone">Mobile Phone:</label>
                     <input type="tel" name="phone" value="" id="phone" required pattern="[0-9]{10}" title="Please enter a valid 10-digit mobile number" required />
                     <label class="" for="location">Location:</label>
                     <!-- <input type="text" name="location" value="" id="location" required /> -->
                     <select id="location" required>
                        <option value="mumbai">Mumbai</option>
                        <option value="pune">Pune</option>
                        <option value="chennai">Chennai</option>
                        <option value="delhi">Delhi</option>
                        <option value="hyderabad">Hyderabad</option>
                        <option value="ahmedabad">Ahmedabad</option>
                        <option value="bengaluru">Bengaluru</option>
                        <option value="kolkata">Kolkata</option>
                     </select>
                     <label>Educational Qualification:</label>
                     <select id="eq" required>
                        <option value="phd">PhD</option>
                        <option value="postgraduate">Post Graduate</option>
                        <option value="graduate">Graduate</option>
                        <option value="school">School</option>
                     </select>
                     <label>Preferred subjects:</label>
                     <select id="sub" required>
                        <option value="maths">Maths</option>
                        <option value="science">Science</option>
                        <option value="english">English</option>
                        <option value="socialstudies">Social Studies</option>
                     </select>
                     <label>Select spoken Languages:(Select multiple)</label>
                     <select id="lang" required multiple>
                        <option value="English">English</option>
                        <option value="hindi">Hindi</option>
                        <option value="kannada">Kannada</option>
                        <option value="telugu">Telugu</option>
                        <option value="tamil">Tamil</option>
                        <option value="marathi">Marathi</option>
                        <option value="gujarati">Gujarathi</option>
                        <option value="bangla">Bangla</option>
                     </select>
                     <label>Week day Availability:(Select multiple)</label>
                     <select id="day" required multiple>
                        <option value="sunday">Sunday</option>
                        <option value="monday">Monday</option>
                        <option value="tuesday">Tuesday</option>
                        <option value="wednesday">Wednesday</option>
                        <option value="thursday">Thursday</option>
                        <option value="friday">Friday</option>
                        <option value="saturday">Saturday</option>
                     </select>
                     <!--<label class="" for="Languages">Select spoken Languages:</label>
                        <label class="" for="Languages">Hindi:</label>
                        <input type="checkbox" name="lang" value="Hindi" id="s1" required />
                        <label class="" for="Languages">Kannada:</label>
                        <input type="checkbox" name="lang" value="Kannada" id="s2" required />
                        <label class="" for="Languages">Telugu:</label>
                        <input type="checkbox" name="lang" value="Telugu" id="s3" required />
                        -->
                  </fieldset>
                  <button type="submit" id="submit" sendMessage()>Register</button>
                  
               </form>
               </br>
               <div class="alert">Form Submitted Successfully</div>
               <script>
                  function goToAdminPage() {
                      window.location.href = "admin.html";
                  }
                  
               </script>
               <script type="module">
                  // Import the functions you need from the SDKs you need
                  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
                  // TODO: Add SDKs for Firebase products that you want to use
                  // https://firebase.google.com/docs/web/setup#available-libraries
                  
                  // Your web app's Firebase configuration
                  const firebaseConfig = {
                      apiKey: "AIzaSyBDZ0SUE0ZFa6k2ErpO8dX1remzDsxeKFw",
                      authDomain: "form-75c4a.firebaseapp.com",
                      databaseURL: "https://form-75c4a-default-rtdb.firebaseio.com",
                      projectId: "form-75c4a",
                      storageBucket: "form-75c4a.appspot.com",
                      messagingSenderId: "701401774989",
                      appId: "1:701401774989:web:41b496e6278b46fddb1bc4"
                   };
                  
                  // Initialize Firebase
                  const app = initializeApp(firebaseConfig);
                  
                  import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";
                  
                      //listen for submit event//(1)
                  document.getElementById('registrationform')
                    .addEventListener('submit', formSubmit);
                  
                  //     const btn=document.querySelector('#regisrationform');
                  //     btn.addEventListener('click', (event) => {
                  //     let checkboxes= document.querySelectorAll('input[name="lang"]:checked');
                  //     let output= [];
                  //     checkboxes.forEach((checkbox) => {
                  //     output.push(checkbox.value);
                  //     console.log(output);
                  //     });
                  
                  
                  // }); 
                  //     document.getElementById('submit').onclick = function() {
                  //     var selected = [];
                  //     for (var option of document.getElementById('lang').options)
                  //     {
                  //     if (option.selected) {
                  //     selected.push(option.value);
                  //      }
                  //     }
                  //     alert(selected);
                  //     var days = [];
                  //     for (var option of document.getElementById('day').options)
                  //     {
                  //     if (option.selected) {
                  //     days.push(option.value);
                  //      }
                  //     }
                  
                  // }
                  
                    //Submit form(1.2)
                    function formSubmit(e) {
                      e.preventDefault();
                      // Get Values from the DOM
                      let name = document.querySelector('#name').value;
                      let dob = document.querySelector('#dob').value;
                      let gender = document.querySelector('#gender').value;
                      let email = document.querySelector('#email').value;
                      let phone = document.querySelector('#phone').value;
                      let location = document.querySelector('#location').value;
                      let eq = document.querySelector('#eq').value;
                      let subject = document.querySelector('#sub').value;
                      //let lan = document.querySelector('#lang').value;
                      //let lan = $("#lang").val();
                      var selected = [];
                      for (var option of document.getElementById('lang').options)
                      {
                      if (option.selected) {
                      selected.push(option.value);
                       }
                      }
                      
                      var days = [];
                      for (var option of document.getElementById('day').options)
                      {
                      if (option.selected) {
                      days.push(option.value);
                       }
                      }
                      var lan=[];
                      var lan=selected;
                      //console.log(tlds);
                  
                      var day=[];
                      var day=days;
                  
                      //console.log(lan);
                      //let day = document.querySelector('#day').value;
                      //let interest = document.querySelector('#interest').value;
                  
                  
                      sendMessage(name,dob,gender, email, phone, location, eq, subject, lan, day);
                  }
                  
                  
                  //Send Message to Firebase(4)
                  function sendMessage(name,dob,gender, email, phone, location, eq, subject, lan, day) {
                  const database = getDatabase();
                  
                  set(ref(database, 'users/' + Math.floor(Math.random() * 10000000)), {
                  name: name,
                  dob:  dob,
                  gender: gender,
                  email: email,
                  phone: phone,
                  location: location,
                  qualification: eq,
                  subject: subject,
                  lan: lan,
                  day: day
                  
                  }).then(() => {
                  //Show Alert Message(5)
                  document.querySelector('.alert').style.display = 'block';
                  //Hide Alert Message After Seven Seconds(6)
                  setTimeout(function () {
                  document.querySelector('.alert').style.display = 'none';
                  }, 7000);
                  document.getElementById('registrationform').reset();
                  }).catch((error) => {
                  alert(error)
                  })
                  }
                  
                  
                  
               </script>
               <!-- <form>
                  <div class="inputbox">
                      <input type="text" value="" id="username" required>
                      <span>username</span>
                  </div>
                  <div class="inputbox">
                      <input type="email" value="" id="email" required>
                      <span>E-mail</span>
                  </div>
                  <div class="inputbox">
                      <input type="text" value="" id="phone" required>
                      <span>Phone Number</span>
                  </div>
                  <input type="submit" value="submit" class="sub" id="submit">
                  </form> -->
            </div>
         </div>
      </div>
   </body>
</html>
